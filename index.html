<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>UGPhone Stock</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
html, body {
  margin:0; padding:0; height:100%; font-family: Arial, sans-serif; background:#000; color:#eee; overflow-x:hidden;
}

/* Video n·ªÅn */
.video-background {
  position: fixed; inset:0; overflow:hidden; z-index:-1; pointer-events:none;
}
.video-background iframe {
  position:absolute; top:50%; left:50%; width:120%; height:120%; transform:translate(-50%,-50%);
  filter: blur(4px) brightness(0.6);
}

/* N·ªôi dung */
.content { position:relative; z-index:1; text-align:center; padding:40px 20px; color:#fff; }
.content h1 { font-size:48px; font-weight:900; text-shadow:2px 2px 10px rgba(0,0,0,0.8); margin-bottom:10px; color:#ff0; }
.note { font-size:14px; color:#ff0000; font-weight:bold; margin-bottom:12px; }

/* B·∫£ng stock */
table { width:90%; max-width:700px; margin:20px auto; border-collapse:collapse; background: rgba(0,0,0,0.6); border-radius:12px; font-size:1.2em; }
th, td { padding:15px; text-align:center; border-bottom:1px solid #333; }
th { background:#d20000; color:#ff0; }
td.server { color:#ff0; font-weight:bold; }
td.status.green { color:#0f0; font-weight:bold; }
td.status.red { color:#f00; font-weight:bold; }
td.status.gray { color:#ccc; font-weight:bold; }
tr:nth-child(even) { background: rgba(0,0,0,0.4); }
tr:hover { background: rgba(255,255,0,0.2); }

/* N√∫t b·∫≠t/t·∫Øt ti·∫øng */
.sound-btn {
  position: fixed; bottom:20px; right:20px; z-index:2;
  padding:10px 20px; background: rgba(0,0,0,0.6); color:white; border:none;
  border-radius:8px; cursor:pointer; font-size:16px; transition:background 0.2s;
}
.sound-btn:hover { background: rgba(0,0,0,0.8); }

/* Responsive */
@media(max-width:640px){
  .content h1{ font-size:34px; }
  table{ font-size:1em; }
  .sound-btn{ font-size:14px; padding:8px 16px; }
}
</style>
</head>
<body>

<!-- Video n·ªÅn -->
<div class="video-background">
  <iframe id="bg-video"
    src="https://www.youtube.com/embed/Sas3Tw_FpnA?autoplay=1&mute=1&loop=1&playlist=Sas3Tw_FpnA&controls=0&modestbranding=1&iv_load_policy=3&enablejsapi=1"
    frameborder="0" allow="autoplay; encrypted-media"></iframe>
</div>

<!-- N·ªôi dung -->
<div class="content">
  <h1>üìä UGPhone Stock</h1>
  <p class="note">C·∫≠p nh·∫≠t theo API UgPhone</p>

  <table id="stock-table">
    <thead>
      <tr>
        <th>Server</th>
        <th>Tr·∫°ng th√°i</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <button class="sound-btn" onclick="toggleSound()">üîä B·∫≠t ti·∫øng</button>
</div>

<script>
async function loadStock() {
  try {
    const res = await fetch('https://meows.io.vn/call-ugphone-status');
    const data = await res.json();
    const tbody = document.querySelector('#stock-table tbody');
    tbody.innerHTML = '';

    if (data.success && Array.isArray(data.status)) {
      data.status.forEach(line => {
        if(line.includes('Uptime') || line.includes('Trang th√°i')) return;
        const tr = document.createElement('tr');
        const parts = line.split(':');
        if(parts.length<2) return;

        const tdServer = document.createElement('td');
        tdServer.textContent = parts[0].trim();
        tdServer.className='server';

        const tdStatus = document.createElement('td');
        const statusEmoji = parts[1].trim();
        if(statusEmoji.includes('üü¢')) {
          tdStatus.textContent='üü¢ C√≤n m√°y';
          tdStatus.className='status green';
        } else if(statusEmoji.includes('üî¥')) {
          tdStatus.textContent='üî¥ H·∫øt m√°y';
          tdStatus.className='status red';
        } else {
          tdStatus.textContent='‚ùå L·ªói';
          tdStatus.className='status gray';
        }

        tr.appendChild(tdServer);
        tr.appendChild(tdStatus);
        tbody.appendChild(tr);
      });
    }
  } catch(err){ console.error('Kh√¥ng th·ªÉ load stock',err); }
}

loadStock();
setInterval(loadStock,1000);

// B·∫≠t/t·∫Øt ti·∫øng
let isMuted=true;
function toggleSound(){
  const iframe=document.getElementById("bg-video");
  iframe.contentWindow.postMessage(JSON.stringify({event:"command",func:isMuted?"unMute":"mute",args:[]}),"*");
  document.querySelector(".sound-btn").innerText=isMuted?"üîá T·∫Øt ti·∫øng":"üîä B·∫≠t ti·∫øng";
  isMuted=!isMuted;
}
</script>
</body>
</html>
